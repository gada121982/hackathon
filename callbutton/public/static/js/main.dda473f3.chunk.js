(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAAA5VJREFUaAXlmD1oVEEQx3NR4RA1mICcYjoxggGjncbCRMWUooiNNpLCRoTE2ia1FmqlXWwlKBaKRCxEUNHYBPwARYtE8RM/EEHN+ZtL9uVu8+52dt/m7sCB/+3btzOz83t7d7t3LS2RrVgsdqOL6DX6i+plMt8VtDsy0nw6kp9Gf1AjbYbJz81XFeGKhMvQaCOpUuY+Lmi5rHwkbiPHGOrPmity/A/yFTIBAtdJkhtoc+TiYqXb2RqaCbgeYu+jZoUTtC1BgMANEHwXrZMsTWx5b0DgBgG6jlY0MVhSmhcgcCNEXkJLkwx+F+O4T/iFlLyf8SoPdXEMsBjbwC3y5NFq9Bhp7SmOBSQ1jGmD5vyGnE8ExzZ02zOx7V6CM5MxqIUswZXF+ULWBqSQTjRpV+vZr4ArK9YFWQFXFucDWR0QiB405QmT5r7DFGe3OLejtLdrKpyJJ0bOu5ojYTogwQPoO4phn0iy1RRnt4zZK+mC6yJmWlnYQkACB9FvZQKtmxYyJpzUVgnIjRFtxQF+Lkh5uxbsFTZ9xnxWzpQ3C0hPPrj1+DVQE9LA2G0gnEAOtfIivwZuoqN24kXot5NznDmrfibtOfHt4t4dtNYe0/TlJDOK+jXOkXzUkFnhpF4B3CUXdTaBvKCY8yw+QStncgvgqOnUsZWz5UHFfPKxCTm7JqkF8CTSPM0kKOOFwPXlcrl3rjz4fMZnDwqGbCXJDDpBklOoiBbT1HCmCGr7wnUwpKxgyUh0hovD6NfsneivNeH4QtlU7dt1DnIvFQWvZELDJL3oI4pprhOKwL1FNfdJxu1jnavG2Y0+oZu7IGojeumKVo5r4Uy6mJDpgMLJbGvQAzNrhnab/QBNn5xm5ez0LsgNBIT/migrYDmJrtqze/af479gL+NeNTiTPhWSQTmzPjFOjrb6CpZBynHuvCORa7gCEmcXnMlXAclNHzjJ4QYsAx0mQP73D7USJMFaODNPCZJOB9KunIkd8vpnm6hDAMvJJ2/APdsX+K9CBc842fCnUbdn3LAXoCQHspfmGuqQfpPbcLLRawtl072Hr/zP8kob00g/b0ApFkh5q21HD6XfxPY1CFCAgHxP04fk7dqsNhEMKERA/qQ5gOr5a0Sm1tgUTpMaR5UPXz5ZtxHz1R6r3acq3MeJyvajD7EqDMzzjbhjpm7vbcIEVmtJvpKxI0ie4Hq0BNXD3jDJI3SZj45c/x/2D29p6Q2sD3yAAAAAAElFTkSuQmCC"},29:function(e,t,n){e.exports=n.p+"static/media/call.578398ce.svg"},30:function(e,t,n){e.exports=n(63)},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(26),c=n.n(i),s=(n(35),n(5)),l=n(6),r=n(8),u=n(7),m=(n(36),n(37),n(27)),d=n(28),h=n.n(d),f=n(29),g=n.n(f),p=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleOpenForm=function(){a.setState({isChangeForm:!0})},a.handleCloseForm=function(){a.setState({isChangeForm:!1})},a.onChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.onClick=function(e){e.preventDefault(),a.props.handleCall(a.state.phoneNumber)},a.clickGetNumber=function(e){var t=a.state.phoneNumber,n=e;console.log("typeOfStringNum",typeof n),a.setState({phoneNumber:t.concat(n)})},a.clicRemoveNumber=function(){var e=a.state.phoneNumber,t=e.substring(0,e.length-1);a.setState({phoneNumber:t})},a.state={isChangeForm:!1,phoneNumber:"0342350466"},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"buttonWrap",style:{visibility:this.state.isChangeForm?"hidden":"visible"},onClick:this.handleOpenForm},o.a.createElement("img",{src:g.a})),o.a.createElement("div",{className:"panelCall",style:{visibility:this.state.isChangeForm?"visible":"hidden"}},o.a.createElement("div",{className:"closePanel"},o.a.createElement("div",{className:"line",onClick:this.handleCloseForm})),o.a.createElement("div",{className:"inputControl"},o.a.createElement("input",{type:"text",name:"phoneNumber",value:this.state.phoneNumber,onChange:this.onChange}),o.a.createElement("button",{className:"del",onClick:function(){return e.clicRemoveNumber()}},o.a.createElement("img",{src:h.a}))),o.a.createElement("div",{className:"keyBoard"},o.a.createElement("div",{className:"row"},o.a.createElement("button",{onClick:function(){e.clickGetNumber("1")}})," ",o.a.createElement("button",{onClick:function(){e.clickGetNumber("2")}}),o.a.createElement("button",{onClick:function(){e.clickGetNumber("3")}})),o.a.createElement("div",{className:"row"},o.a.createElement("button",{onClick:function(){e.clickGetNumber("4")}}),o.a.createElement("button",{onClick:function(){e.clickGetNumber("5")}}),o.a.createElement("button",{onClick:function(){e.clickGetNumber("6")}})),o.a.createElement("div",{className:"row"},o.a.createElement("button",{onClick:function(){e.clickGetNumber("7")}}),o.a.createElement("button",{onClick:function(){e.clickGetNumber("8")}}),o.a.createElement("button",{onClick:function(){e.clickGetNumber("9")}})),o.a.createElement("div",{className:"row"},o.a.createElement("button",{onClick:function(){e.clickGetNumber("0")}}))),o.a.createElement("button",{className:"callState",onClick:this.onClick})))}}]),n}(a.Component),v=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"panelCalling",style:{visibility:"end"===this.props.state||"failed"===this.props.state?"hidden":"visible"}},o.a.createElement("div",{className:"closePanelCalling"},o.a.createElement("div",{className:"line"})),o.a.createElement("div",{className:"stateControl"},o.a.createElement("h5",null,this.props.phone),o.a.createElement("p",null,this.props.state)),o.a.createElement("button",{className:"callingState"}))}}]),n}(a.Component),b=n(16),C=n.n(b),E=n(17),N=n.n(E),k=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={localHasVideo:!1,remoteHasVideo:!1,localHold:!1,remoteHold:!1,canHold:!1,ringing:!1,state:null},a._localClonedStream=null,a}return Object(l.a)(n,[{key:"render",value:function(){this.props.session;var e=this.state;this.props,document.getElementById("#audio");return o.a.createElement("div",null,o.a.createElement("video",{ref:"localVideo",className:N()("local-video",{hidden:!e.localHasVideo}),autoPlay:!0,muted:!0}),o.a.createElement("video",{ref:"remoteVideo",className:N()("remote-video",{hidden:void 0}),autoPlay:!0}))}},{key:"componentDidMount",value:function(){var e=this,t=this.refs.localVideo,n=this.props.session,a=n.connection,o=a.getLocalStreams()[0];a.getRemoteStreams()[0];o&&(this._localClonedStream=o.clone(),t.srcObject=this._localClonedStream,setTimeout((function(){o.getVideoTracks()[0]&&e.setState({localHasVideo:!0})}),1e3)),n.isEstablished()&&setTimeout((function(){e.setState({canHold:!0})})),n.on("connecting",(function(t){e.setState({},(function(){}))})),n.on("progress",(function(t){"outgoing"===n.direction&&e.setState({ringing:!0,state:"process"},(function(){e.props.getState(e.state.state)}))})),n.on("accepted",(function(t){n.direction,e.setState({canHold:!0,ringing:!1,state:"accepted"},(function(){e.props.getState(e.state.state)}))})),n.on("failed",(function(t){"outgoing"===n.direction&&e.setState({ringing:!1},(function(){console.log("lloic")}))})),n.on("ended",(function(t){"outgoing"===n.direction&&e.setState({ringing:!1,state:"end"},(function(){e.props.getState(e.state.state)}))}))}}]),n}(a.Component),S=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleCall=function(e){if(0!==e.length){var t=a.ua.call(e,{pcConfig:{iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}]},mediaConstraints:{audio:!0,video:!1},rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:0}});t.on("connecting",(function(){a.setState({session:t,state:"connecting",phone:e})})),t.on("progress",(function(){})),t.on("failed",(function(e){a.setState({session:null,state:"failed"},(function(){console.log("failed")}))})),t.on("ended",(function(){a.setState({session:null,state:"end"},(function(){console.log("ended")}))})),t.on("accepted",(function(){a.soundPlayer.play()}),(function(){}))}},a.getState=function(e){a.setState({state:e},(function(){}))},a.setTime=function(e){console.log(e)},a.state={session:null,state:null,phone:null},a.ua=null,a.soundPlayer=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e={sockets:[new C.a.WebSocketInterface("wss://sbc03.tel4vn.com:7444")],uri:"101@2-test1.gcalls.vn:50061",password:"test101",display_name:"1008",authorization_user:null,register:!0,register_expires:null,registrar_server:null,no_answer_timeout:null,session_timers:!1,use_preloaded_route:null,connection_recovery_min_interval:null,connection_recovery_max_interval:null,hack_via_tcp:null,hack_via_ws:null,hack_ip_in_contact:null,user_agent:"extension_content"};this.soundPlayer=document.createElement("audio");document.querySelector("#my-video"),document.querySelector("#peer-video");this.ua=new C.a.UA(e),this.ua.on("newRTCSession",(function(e){(console.log("newRTCSession"),"local"!==e.originator)&&function(e){var t=this;e.on("failed",(function(){t.setState({session:null})})),e.on("ended",(function(){t.setState({session:null})})),e.on("accepted",(function(){t.setState({session:e})}))}(e.session)})),this.ua.on("connected",(function(e){console.log("connected")})),this.ua.on("disconnected",(function(e){console.log("disconnected")})),this.ua.on("registered",(function(e){console.log("registered")})),this.ua.on("unregistered",(function(e){console.log("unregistered")})),this.ua.on("registrationFailed",(function(e){console.log("registrationFailed")})),this.ua.start()}},{key:"render",value:function(){return o.a.createElement("div",{className:"callContainer"},o.a.createElement(p,{handleCall:this.handleCall}),o.a.createElement("div",{className:"content"},this.state.session?o.a.createElement(k,{setTime:this.setTime,session:this.state.session,getState:this.getState}):null),null!==this.state.state?o.a.createElement(v,{state:this.state.state,phone:this.state.phone}):"")}}]),n}(a.Component),A=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(S,null))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.dda473f3.chunk.js.map