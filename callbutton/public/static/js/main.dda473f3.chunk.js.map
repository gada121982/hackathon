{"version":3,"sources":["Components/img/dialpad-del.png","Components/img/call.svg","Components/call/Call.js","Components/calling/Calling.js","Components/Session/Session.js","Components/button/Button.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Call","props","handleOpenForm","setState","isChangeForm","handleCloseForm","onChange","e","target","name","value","onClick","preventDefault","handleCall","state","phoneNumber","clickGetNumber","num","phoneArr","stringNum","console","log","concat","clicRemoveNumber","result","substring","length","className","style","visibility","this","src","call","type","del","Component","Calling","phone","Session","localHasVideo","remoteHasVideo","localHold","remoteHold","canHold","ringing","_localClonedStream","session","document","getElementById","ref","classnames","hidden","autoPlay","muted","noRemoteVideo","localVideo","refs","peerconnection","connection","localStream","getLocalStreams","getRemoteStreams","clone","srcObject","setTimeout","getVideoTracks","isEstablished","on","data","direction","getState","Button","phoneNum","ua","pcConfig","iceServers","mediaConstraints","audio","video","rtcOfferConstraints","offerToReceiveAudio","offerToReceiveVideo","soundPlayer","play","setTime","configuration","sockets","JsSIP","WebSocketInterface","uri","password","display_name","authorization_user","register","register_expires","registrar_server","no_answer_timeout","session_timers","use_preloaded_route","connection_recovery_min_interval","connection_recovery_max_interval","hack_via_tcp","hack_via_ws","hack_ip_in_contact","user_agent","createElement","querySelector","UA","originator","newCall","start","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.dda473f3.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAoCAYAAACrUDmFAAAAAXNSR0IArs4c6QAAA5VJREFUaAXlmD1oVEEQx3NR4RA1mICcYjoxggGjncbCRMWUooiNNpLCRoTE2ia1FmqlXWwlKBaKRCxEUNHYBPwARYtE8RM/EEHN+ZtL9uVu8+52dt/m7sCB/+3btzOz83t7d7t3LS2RrVgsdqOL6DX6i+plMt8VtDsy0nw6kp9Gf1AjbYbJz81XFeGKhMvQaCOpUuY+Lmi5rHwkbiPHGOrPmity/A/yFTIBAtdJkhtoc+TiYqXb2RqaCbgeYu+jZoUTtC1BgMANEHwXrZMsTWx5b0DgBgG6jlY0MVhSmhcgcCNEXkJLkwx+F+O4T/iFlLyf8SoPdXEMsBjbwC3y5NFq9Bhp7SmOBSQ1jGmD5vyGnE8ExzZ02zOx7V6CM5MxqIUswZXF+ULWBqSQTjRpV+vZr4ArK9YFWQFXFucDWR0QiB405QmT5r7DFGe3OLejtLdrKpyJJ0bOu5ojYTogwQPoO4phn0iy1RRnt4zZK+mC6yJmWlnYQkACB9FvZQKtmxYyJpzUVgnIjRFtxQF+Lkh5uxbsFTZ9xnxWzpQ3C0hPPrj1+DVQE9LA2G0gnEAOtfIivwZuoqN24kXot5NznDmrfibtOfHt4t4dtNYe0/TlJDOK+jXOkXzUkFnhpF4B3CUXdTaBvKCY8yw+QStncgvgqOnUsZWz5UHFfPKxCTm7JqkF8CTSPM0kKOOFwPXlcrl3rjz4fMZnDwqGbCXJDDpBklOoiBbT1HCmCGr7wnUwpKxgyUh0hovD6NfsneivNeH4QtlU7dt1DnIvFQWvZELDJL3oI4pprhOKwL1FNfdJxu1jnavG2Y0+oZu7IGojeumKVo5r4Uy6mJDpgMLJbGvQAzNrhnab/QBNn5xm5ez0LsgNBIT/migrYDmJrtqze/af479gL+NeNTiTPhWSQTmzPjFOjrb6CpZBynHuvCORa7gCEmcXnMlXAclNHzjJ4QYsAx0mQP73D7USJMFaODNPCZJOB9KunIkd8vpnm6hDAMvJJ2/APdsX+K9CBc842fCnUbdn3LAXoCQHspfmGuqQfpPbcLLRawtl072Hr/zP8kob00g/b0ApFkh5q21HD6XfxPY1CFCAgHxP04fk7dqsNhEMKERA/qQ5gOr5a0Sm1tgUTpMaR5UPXz5ZtxHz1R6r3acq3MeJyvajD7EqDMzzjbhjpm7vbcIEVmtJvpKxI0ie4Hq0BNXD3jDJI3SZj45c/x/2D29p6Q2sD3yAAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/call.578398ce.svg\";","import React, { Component } from 'react'\r\nimport del from '../img/dialpad-del.png'\r\nimport call from '../img/call.svg'\r\nexport default class Call extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isChangeForm: false,\r\n            phoneNumber: '0342350466'\r\n        }\r\n    }\r\n    handleOpenForm = () => {\r\n        // return (\r\n        this.setState({\r\n            isChangeForm: true\r\n        });\r\n    }\r\n    handleCloseForm = () => {\r\n        // return (\r\n        this.setState({\r\n            isChangeForm: false\r\n        });\r\n    }\r\n    onChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n    onClick = (e) => {\r\n        e.preventDefault();\r\n        this.props.handleCall(this.state.phoneNumber)\r\n        // console.log(this.state.phoneNumber);\r\n\r\n    }\r\n    clickGetNumber = (num) => {\r\n        // let phoneArr = [...this.state.phoneNumber];\r\n        // console.log('phoneArr', phoneArr);\r\n        let phoneArr = this.state.phoneNumber\r\n        let stringNum = num\r\n        console.log('typeOfStringNum', typeof stringNum);\r\n        this.setState({\r\n            phoneNumber: phoneArr.concat(stringNum)\r\n        })\r\n    }\r\n    clicRemoveNumber = () => {\r\n        let phoneArr = this.state.phoneNumber\r\n        let result = phoneArr.substring(0, phoneArr.length - 1);\r\n        this.setState({\r\n            phoneNumber: result\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n                <button className=\"buttonWrap\"\r\n                    style={{ visibility: this.state.isChangeForm ? 'hidden' : 'visible' }}\r\n                    onClick={this.handleOpenForm}\r\n                >\r\n                    <img src={call} />\r\n                    {/* <audio></audio>\r\n        <audio></audio> */}\r\n                </button>\r\n                <div className=\"panelCall\"\r\n                    style={{ visibility: this.state.isChangeForm ? 'visible' : 'hidden' }}\r\n                >\r\n                    <div className=\"closePanel\">\r\n                        <div className=\"line\" onClick={this.handleCloseForm}></div>\r\n                    </div>\r\n                    {/* {this.props.session.isInProgress() ? <p>connecting</p> : null} */}\r\n                    <div className=\"inputControl\">\r\n                        <input type=\"text\"\r\n                            name=\"phoneNumber\"\r\n                            value={this.state.phoneNumber}\r\n                            onChange={this.onChange}\r\n                        />\r\n                        <button className=\"del\" onClick={() => this.clicRemoveNumber()}>\r\n                            <img src={del} />\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"keyBoard\">\r\n                        <div className=\"row\">\r\n                            <button onClick={() => { this.clickGetNumber('1') }}></button> {/* 1 */}\r\n                            <button onClick={() => { this.clickGetNumber('2') }}></button>\r\n                            <button onClick={() => { this.clickGetNumber('3') }}></button>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button onClick={() => { this.clickGetNumber('4') }}></button>\r\n                            <button onClick={() => { this.clickGetNumber('5') }}></button>\r\n                            <button onClick={() => { this.clickGetNumber('6') }}></button>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button onClick={() => { this.clickGetNumber('7') }}></button>\r\n                            <button onClick={() => { this.clickGetNumber('8') }}></button>\r\n                            <button onClick={() => { this.clickGetNumber('9') }}></button>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button onClick={() => { this.clickGetNumber('0') }}></button>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"callState\" onClick={this.onClick}></button>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport default class Calling extends Component {\r\n  // constructor(props) {\r\n  //     super(props);\r\n  //     this.state = {\r\n\r\n  //     }\r\n  // }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"panelCalling\"\r\n        style={{ visibility: this.props.state === \"end\" || this.props.state === \"failed\" ? 'hidden' : 'visible' }}\r\n      >\r\n        <div className=\"closePanelCalling\">\r\n          <div className=\"line\"></div>\r\n        </div>\r\n        <div className=\"stateControl\">\r\n          <h5>{this.props.phone}</h5>\r\n          <p>{this.props.state}</p>\r\n        </div>\r\n        {/* <div className=\"keyBoardCalling\">\r\n                    <div className=\"row\">\r\n                        <button></button>\r\n                        <button></button>\r\n                        <button></button>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <button></button>\r\n                        <button></button>\r\n                        <button></button>\r\n                    </div>\r\n                </div> */}\r\n        <button className=\"callingState\"></button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport classnames from 'classnames'\r\nexport default class Session extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      localHasVideo: false,\r\n      remoteHasVideo: false,\r\n      localHold: false,\r\n      remoteHold: false,\r\n      canHold: false,\r\n      ringing: false,\r\n      state: null\r\n    };\r\n    // Mounted flag\r\n    // this._mounted = false;\r\n    // Local cloned stream\r\n    this._localClonedStream = null;\r\n\r\n  }\r\n  render() {\r\n    const session = this.props.session\r\n    // console.log(session);\r\n    const state = this.state;\r\n    const props = this.props;\r\n    let noRemoteVideo;\r\n    var soundPlayer = document.getElementById('#audio');\r\n\r\n    // if (props.session.isInProgress() && !state.ringing)\r\n    //     noRemoteVideo = <div className=\"message\">connecting ...</div>;\r\n    // else if (state.ringing)\r\n    //     noRemoteVideo = <div className=\"message\">ringing ...</div>;\r\n    // else if (state.localHold && state.remoteHold)\r\n    //     noRemoteVideo = <div className=\"message\">both hold</div>;\r\n    // else if (state.localHold)\r\n    //     noRemoteVideo = <div className=\"message\">local hold</div>;\r\n    // else if (state.remoteHold)\r\n    //     noRemoteVideo = <div className=\"message\">remote hold</div>;\r\n    // else if (!state.remoteHasVideo)\r\n    //     noRemoteVideo = <div className=\"message\">no remote video</div>;\r\n    // setTimeout(() => {\r\n    //     if (session) {\r\n    //         var audio = document.querySelector(\"#myaudio\");\r\n    //         console.log(audio)\r\n    //         audio.volume = 1;\r\n    //     }\r\n    // }, 0)\r\n\r\n    return (\r\n      <div>\r\n\r\n        <video\r\n          ref=\"localVideo\"\r\n          className={classnames(\"local-video\", {\r\n            hidden: !state.localHasVideo,\r\n          })}\r\n          autoPlay\r\n          muted\r\n        />\r\n\r\n        <video\r\n          ref=\"remoteVideo\"\r\n          className={classnames(\"remote-video\", { hidden: noRemoteVideo })}\r\n          autoPlay\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n  componentDidMount() {\r\n    const localVideo = this.refs.localVideo;\r\n    const session = this.props.session;\r\n    const peerconnection = session.connection;\r\n    const localStream = peerconnection.getLocalStreams()[0];\r\n    const remoteStream = peerconnection.getRemoteStreams()[0];\r\n    if (localStream) {\r\n      // Clone local stream\r\n      this._localClonedStream = localStream.clone();\r\n      // Display local stream\r\n      localVideo.srcObject = this._localClonedStream;\r\n      setTimeout(() => {\r\n\r\n        if (localStream.getVideoTracks()[0])\r\n          this.setState({ localHasVideo: true });\r\n      }, 1000);\r\n    }\r\n    if (remoteStream) {\r\n    }\r\n    if (session.isEstablished()) {\r\n      setTimeout(() => {\r\n        this.setState({ canHold: true });\r\n      });\r\n    }\r\n    session.on('connecting', (data) => {\r\n      this.setState({\r\n        // state: \"connecting\"\r\n      }, () => {\r\n      })\r\n    })\r\n    session.on(\"progress\", (data) => {\r\n      if (session.direction === \"outgoing\") {\r\n        this.setState({\r\n          ringing: true, state: 'process'\r\n        }, () => {\r\n          this.props.getState(this.state.state)\r\n        });\r\n      }\r\n    });\r\n    session.on(\"accepted\", (data) => {\r\n      if (session.direction === \"outgoing\") {\r\n\r\n      }\r\n\r\n\r\n      this.setState({\r\n        canHold: true, ringing: false, state: 'accepted'\r\n      }, () => {\r\n        this.props.getState(this.state.state)\r\n      });\r\n    });\r\n    session.on(\"failed\", (data) => {\r\n      if (session.direction === \"outgoing\")\r\n        this.setState({\r\n          ringing: false\r\n        }, () => {\r\n          console.log(\"lloic\");\r\n        });\r\n    });\r\n\r\n    session.on(\"ended\", (data) => {\r\n      if (session.direction === \"outgoing\") {\r\n        this.setState({\r\n          ringing: false,\r\n          state: 'end'\r\n        }, () => {\r\n          this.props.getState(this.state.state)\r\n        });\r\n      }\r\n    });\r\n  }\r\n  // _handleRemoteStream(stream) {\r\n\r\n  //     const remoteVideo = this.refs.remoteVideo;\r\n\r\n  //     // Display remote stream\r\n  //     remoteVideo.srcObject = stream;\r\n\r\n  //     this._checkRemoteVideo(stream);\r\n\r\n  //     stream.addEventListener(\"addtrack\", (event) => {\r\n  //         const track = event.track;\r\n\r\n  //         if (remoteVideo.srcObject !== stream) return;\r\n\r\n\r\n  //         // Refresh remote video\r\n  //         remoteVideo.srcObject = stream;\r\n\r\n  //         this._checkRemoteVideo(stream);\r\n  //     });\r\n  // }\r\n  // _checkRemoteVideo(stream) {\r\n  //     const videoTrack = stream.getVideoTracks()[0];\r\n  //     this.setState({ remoteHasVideo: Boolean(videoTrack) });\r\n  // }\r\n}\r\n","import React, { Component } from 'react';\r\nimport './Button.css'\r\nimport Call from '../call/Call';\r\nimport Calling from '../calling/Calling';\r\nimport JsSIP from 'jssip'\r\nimport Session from '../Session/Session';\r\n\r\n// import Call from '../call/Call';\r\n\r\nclass Button extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      session: null,\r\n      state: null,\r\n      phone: null\r\n    }\r\n    this.ua = null\r\n    this.soundPlayer = null\r\n  }\r\n  componentDidMount() {\r\n    var configuration = {\r\n      sockets: [new JsSIP.WebSocketInterface('wss://sbc03.tel4vn.com:7444')],\r\n      uri: '101@2-test1.gcalls.vn:50061',\r\n      password: 'test101',\r\n      display_name: '1008',\r\n      authorization_user: null,\r\n      register: true,\r\n      register_expires: null,\r\n      registrar_server: null,\r\n      no_answer_timeout: null,\r\n      session_timers: false,\r\n      use_preloaded_route: null,\r\n      connection_recovery_min_interval: null,\r\n      connection_recovery_max_interval: null,\r\n      hack_via_tcp: null,\r\n      hack_via_ws: null,\r\n      hack_ip_in_contact: null, user_agent: 'extension_content'\r\n    }\r\n    // var localCanRenegotiateRTC = () => {\r\n    //   return JsSIP.rtcninja.canRenegotiate;\r\n    // };\r\n\r\n    this.soundPlayer = document.createElement(\"audio\");\r\n    var localStream, remoteStream;\r\n    var selfView = document.querySelector('#my-video');//lấy ra phần tử #my-video\r\n    var remoteView = document.querySelector('#peer-video');\r\n    // console.log(selfView);\r\n    // console.log(remoteView);\r\n    // soundPlayer.volume = 1;\r\n\r\n    this.ua = new JsSIP.UA(configuration);\r\n    this.ua.on('newRTCSession', (data) => {   //sử lý cuộc gọi đến\r\n      console.log('newRTCSession');\r\n      if (data.originator === 'local')\r\n        return;\r\n      const session = data.session\r\n      newCall(session)\r\n    })\r\n    // //create a call\r\n    function newCall(session) {\r\n      session.on('failed', () => {\r\n        this.setState(\r\n          {\r\n            session: null,\r\n            // incomingSession : null\r\n          });\r\n      });\r\n\r\n      session.on('ended', () => {\r\n        this.setState(\r\n          {\r\n            session: null,\r\n            // incomingSession : null\r\n          });\r\n      });\r\n\r\n      session.on('accepted', () => {\r\n        this.setState(\r\n          {\r\n            session\r\n            // incomingSession : null\r\n          });\r\n      });\r\n\r\n    }\r\n    this.ua.on('connected', (e) => {\r\n      console.log('connected');\r\n    });\r\n    this.ua.on('disconnected', (e) => {\r\n      console.log('disconnected');\r\n    });\r\n    this.ua.on('registered', (e) => {\r\n      console.log('registered');\r\n    });\r\n    this.ua.on('unregistered', (e) => {\r\n      console.log('unregistered');\r\n    });\r\n    this.ua.on('registrationFailed', (e) => {\r\n      console.log('registrationFailed');\r\n    });\r\n\r\n    this.ua.start();\r\n  }\r\n  handleCall = (phoneNum) => {\r\n    if (phoneNum.length === 0) {\r\n      return\r\n    }\r\n    const session = this.ua.call(phoneNum,\r\n      {\r\n        // pcConfig: null,\t  obj đại diện co RTCPeerConnection \r\n        pcConfig: {\r\n          iceServers: [\r\n            {\r\n              'urls': ['stun:stun.l.google.com:19302', 'stun:stun1.l.google.com:19302']\r\n            }\r\n          ]\r\n        },\r\n        mediaConstraints: { //obj cho biết phiên có ý định sử dụng audio hay video hay ko\r\n          audio: true,\r\n          video: false\r\n        },\r\n        rtcOfferConstraints: {\r\n          offerToReceiveAudio: 1,\r\n          offerToReceiveVideo: 0\r\n        }\r\n      })\r\n    session.on('connecting', () => {\r\n      this.setState({\r\n        session,\r\n        state: 'connecting',\r\n        phone: phoneNum\r\n      });\r\n    });\r\n\r\n    session.on('progress', () => {\r\n      // console.log('progress');\r\n\r\n    });\r\n\r\n    session.on('failed', (data) => {\r\n      this.setState({\r\n        session: null,\r\n        state: 'failed'\r\n      }, () => {\r\n        console.log(\"failed\");\r\n      });\r\n    });\r\n\r\n    session.on('ended', () => {\r\n      this.setState({\r\n        session: null,\r\n        state: 'end'\r\n      }, () => {\r\n        console.log('ended');\r\n\r\n      });\r\n    });\r\n\r\n    session.on('accepted', () => {\r\n      this.soundPlayer.play()\r\n    }, () => {\r\n      // console.log('accepted');\r\n    });\r\n  }\r\n\r\n  getState = (state) => {\r\n\r\n    this.setState({\r\n      state: state\r\n    }, () => {\r\n      // console.log(\"trạng thái: \", state);\r\n    })\r\n  }\r\n  setTime = (data) => {\r\n    console.log(data);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"callContainer\">\r\n        {/* panel call */}\r\n        <Call handleCall={this.handleCall} />\r\n        <div className=\"content\">\r\n          {this.state.session ? <Session setTime={this.setTime} session={this.state.session} getState={this.getState} /> : null}\r\n        </div>\r\n        {/* <Session session={this.state.session} /> */}\r\n        {/* panel calling */}\r\n        {this.state.state !== null ?\r\n          <Calling state={this.state.state}\r\n            phone={this.state.phone}\r\n          // handleCancelCall={this.handleCancelCall}\r\n          />\r\n          : ''}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;","import React, { Component } from 'react'\r\nimport './App.css';\r\nimport Button from './Components/button/Button'\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <Button></Button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}